.collapse-code {
	position: relative;
	margin-top: 1em;
	margin-bottom: 1em;
    --collapse-button-color: rgb(45 109 246);
    --collapse-button-hover-color: rgb(2, 37, 172);
    /* The position of the collapse button. Can be left or center. */
    --collapse-button-position: center;
    /* The height of a collapsed code block before expansion */
    --collapsed-visible-height: 250px;
}

.collapse-code pre {
	margin-top: 0;
	margin-bottom: 0;
}

.collapse-code input {
	display: none;
}

.collapse-code input ~ .code-footer {
    text-align: var(--collapse-button-position);
	width: 100%;
	margin: -2.3em auto auto auto;
	padding: 4px 8px 4px 16px;
}

.collapse-code input ~ .code-footer label {
	position: relative;
	margin: 0.05em;
	padding: 0.15em 0.5em 0.15em 1.75em;
	color: var(--md-primary-bg-color);
	font-size: 90%;
	background-color: var(--collapse-button-color);
	mask-repeat: no-repeat;
	mask-size: contain;
    mask-repeat: no-repeat;
	-webkit-mask-size: contain;
    -webkit-mask-repeat: no-repeat;
	border-radius: 2px;
	cursor: pointer;
	content: "";
}

.collapse-code input ~ .code-footer label:hover {
	background-color: var(--collapse-button-hover-color);
}

.collapse-code input ~ .code-footer label::before {
	position: absolute;
	top: 0.15em;
	left: 0.15em;
	display: block;
	box-sizing: border-box;
	width: 1.25em;
	height: 1.25em;
	background-color: var(--md-primary-bg-color);
	background-size: 1.25em;
	content: "";
}

.collapse-code input ~ .code-footer label.expand {
	display: none;
}

.collapse-code input ~ .code-footer label.expand::before {
	mask-image: url('data:image/svg+xml;charset=utf-8,<svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 24 24"><path d="M10 21v-2H6.41l4.5-4.5-1.41-1.41-4.5 4.5V14H3v7h7m4.5-10.09 4.5-4.5V10h2V3h-7v2h3.59l-4.5 4.5 1.41 1.41Z"/></svg>');
    -webkit-mask-image: url('data:image/svg+xml;charset=utf-8,<svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 24 24"><path d="M10 21v-2H6.41l4.5-4.5-1.41-1.41-4.5 4.5V14H3v7h7m4.5-10.09 4.5-4.5V10h2V3h-7v2h3.59l-4.5 4.5 1.41 1.41Z"/></svg>');
}

.collapse-code input ~ .code-footer label.collapse::before {
	mask-image: url('data:image/svg+xml;charset=utf-8,<svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 24 24"><path d="M19.5 3.09 15 7.59V4h-2v7h7V9h-3.59l4.5-4.5-1.41-1.41M4 13v2h3.59l-4.5 4.5 1.41 1.41 4.5-4.5V20h2v-7H4Z"/></svg>');
    -webkit-mask-image: url('data:image/svg+xml;charset=utf-8,<svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 24 24"><path d="M19.5 3.09 15 7.59V4h-2v7h7V9h-3.59l4.5-4.5-1.41-1.41M4 13v2h3.59l-4.5 4.5 1.41 1.41 4.5-4.5V20h2v-7H4Z"/></svg>');
}

.collapse-code input:checked ~ .code-footer label.expand {
	display: inline;
}

.collapse-code input:checked ~ .code-footer label.collapse {
	display: none;
}

.collapse-code input:checked + div.highlight code {
	max-height: var(--collapsed-visible-height);
	overflow: hidden;
}

.collapse-code input:checked ~ .code-footer {
	position: absolute;
	bottom: 0;
	left: 0;
	padding: 32px 8px 8px 16px;
	background-image: linear-gradient(to bottom, transparent, var(--md-default-bg-color) 80% 100%);
}